### 비검사 경고를 제거하라

<img width="450" alt="Image" src="https://github.com/user-attachments/assets/6e489099-40f1-4991-952d-1570fc5ef277" />

위와 같이 제네릭을 사용하게 되면 수많은 컴파일러 경고를 보게 된다.

- 비검사 형변환 경고
- 비검사 메서드 호출 경고
- 비검사 매개변수화 가변인수 타입 경고
- 비검사 변환 경고

이 외에도 다양한 비검사 경고가 존재한다.

대부분 컴파일러가 알려준 대로 수정하면 경고가 사라진다.

또한, 자바 7부터 지원하는 다이아몬드 연산자<> 를 사용하면 해결되기도 한다.

제네릭으로 발생하는 대부분의 경우, `ClassCastException` , 즉 형변환을 하는 과정에서 발생하는 문제이다.

때문에 이러한 부분에 대해서는 최대한 타입을 명확하게 해줌으로써 해결할 수 있는데, 부득이한 경우에서 경고를 제거할 수 없을 수 있다.

예를 들어서

1. 클라이언트에서 Map<Object, Object> 타입의 요청을 받았고,
2. 그 중 name 이란 필드가 String으로 오는게 확실할 경우

를 가정하게 되면 name이란 필드를 형변환할 때 컴파일과정에서는 경고를 띄울 수 있지만, 타입이 안전하다고 확신할 수 있다.

이러한 경우 `@SuppressWarnings("unchecked")` 어노테이션을 달아 경고를 제거할 수 있다.

단, 위 어노테이션은 최대한 좁은 범위에 적용하는 것이 좋다.

- 변수 선언
- 아주 짧은 메서드
- 생성자

등 최대한 좁은 범위에만 적용함으로써 혹시 모를 심각한 경고를 미리 방지해야한다.

아래의 코드는 컴파일 시 문제가 발생한다. 하지만 이 코드가 논리적으로 정상적으로 작동하는게 확실할 경우 어노테이션을 통해 컴파일 경고를 제거하고, 정상작동하도록 할 수 있다.

```java
public <T> T[] toArray(T[] a) {
    return (T[]) Arrays.copyOf(...);
}
```

아래와 같이, 변수를 생성해서 어노테이션을 붙여준 후 반환하는 것이다.

```java
public <T> T[] toArray(T[] a) {
    @SuppressWarnings("unchecked")
    T[] result = (T[]) Arrays.copyOf(...);
    return result;
}
```

다만! 위와 같이 경고를 무시하게 될 경우 문제가 발생할 수 있음에도 컴파일을 허용해주는 부분이기 때문에 이에 대해서 안전한 이유를 항상 주석으로 남겨두어야 한다.

정리하자면, 제네릭을 사용할 때 발생할 수 있는 비검사 경고를 모두 제거해야 한다.

그 과정에서 다이아몬드 연산자나 어노테이션이 사용될 수 있으며, 혹시나 어노테이션을 사용하게 된다면 왜 안전한지, 왜 사용했는지를 주석으로 남겨두어야 한다.
