# 최적화는 신중히 하라

## 최적화 전에 고려해야할 것이 있다.
```
빠른 프로그램과 좋은 프로그램 중 어떤 것이 더 좋을까요??

당연히 좋은 프로그램이라고 생각하실 것 같아요! 하지만 실제 프로그램을 짜다보면 오?! 이렇게 하면 더 빨라질 것 같은데?
라는 유혹이 들때가 있지 않나요??

이 아이템에서 요런 내용을 다루고 있습니다! 
```
### 객체 지향 프로그래밍 원칙을 따르는 프로그램을 작성하자.
객체 지향 프로그래밍 원칙을 따르는 좋은 프로그램은 이후에 최적화할 수 있습니다.

추상화, 정보 은닉 원칙을 따른 프로그램은 개별 요소를 독립적으로 변경하고 수정할 수 있기 때문이에요.
확장, 유지보수가 쉬워진다는 맥락인 것이죠

당장 성능을 최우선 하는 프로그램은 당장에는 만족스러울지라도   
이후 문제가 발생시에 수정하기 힘들고, 최악의 경우에는 재설계를 해야되는 상황이 올 수도 있습니다.

최적화가 아닌 좋은 설계를 따르는 것이 먼저 지켜야하는 원칙인 것이죠!


### 성능을 제한하는 설계를 피하라 ps.아래의 구조는 변경이 어렵다. 
더 구체적으로는 소통하는 곳에서 주의해야 하는데, 아래 4가지는 이후에 변경에 들어가는 비용이 크기 때문이죠!


1. 프로그램 내 컴포넌트끼리의 소통 : 메서드를 호출하거나 이벤트 기반 통신, 공유 메모리등이 해당됩니다 
2. API : 외부에 제공하는 API로 데이터 전송 형식, 호출 빈도 등등을 고려해야합니다! 
3. 네트워크 프로토콜 : HTTP나 TCP,UDP 등이 해당되고 이런 프로토콜은 이후에 변경하는데 큰 비용이 듭니다.
4. 영구 저장용 데이터 포맷 : 대이터를 저장하는 것과 관련되어서, 형식, 저장공간, 스키마등등이 해당됩니다.

특정 구현보다는 이런 설계 요소들이 성능에 영향을 주며 변경이 어려운 편이니 더 조심해야합니다.

### API를 설계할 때 성능에 주는 영향을 고려하라
꼭 REST API처럼 외부 통신에만 국한되는 이야기는 아니고, 컴포넌트 단위를 포함하는 이야기입니다.  

사실 여러 아이템을 다루면서 초기 메서드 API가 성능 저하를 가져오는걸 알지만, 여러 문제들로 변경하지 못하는 예를 많이 다뤘는데요,
이런 경우가 성능을 고려하지 못한 설계였던 것이죠! 

> 이렇게 하는게 간단하고 빠르겠다는 생각이 들어서 좋은 API설계를 따르지 않는 것의 폐해를 생각하면..! 


## 최적화를 한다면 어떻게 해야할까?

그러면 최적화를 잘 하는 방법은 무엇이 있을까요??

### 프로파일링 도구를 사용해서 어떤 부분을 최적화할지 확인한다.
> 일반적으로 90%의 시간을 단 10%의 코드에서 사용한다

라고 합니다..! 프로젝트에서 시간을 잡아먹는 주요 원인을 확인하고 추측하기 어렵습니다.
단순히 여기 알고리즘이 안좋은데..? 로 최적화 할 부분을 결정하는 게 아니고 실제 성능 저하의 원인을 찾아야합니다.

이를 위해서 프로파일링 도구는 어디를 최적화해야할지 알려줍니다.   
개별 메서드의 소비시간, 호출 빈도등을 제공하는 것이죠   


### 최적화 후의 결과가 실제로 성능이 좋아졌는지 확인해야한다.
자바의 성능 모델은 정교하지 않고, 비용을 명확하게 정의하지 않는다고 합니다.

따라서 최적화 전후의 비교가 필수적입니다.

실제 최적화의 결과가 성능면에서 차이가 없거나 오히려 느려지는 경우도 많다고 합니다.
단순히 코드 실행이 아닌 여러 하드웨어 플랫폼에서 비교해보는 노력이 필요합니다! 

따라서 실제로 유의미한 차이가 있는지를 확인하는게 중요한 것이죠!


## 마무리하면서
```java
슬슬 ... 중간고사의 부담감이 !!! ㅋㅋㅋㅋ
벚꽃이 피는 시기가 왔네요...!

쩝 언제 마음편하게 벚꽃을 즐길 수 있을지..?!?! 
```


