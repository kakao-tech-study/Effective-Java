# 필요없는 검사 예외 사용은 피하라

## 검사 예외와 비검사 예외를 알아보자

**검사 예외(컴파일 예외)**    
- 컴파일 과정에서 예외처리가 필수인 예외
- Exception 클래스를 상속받지만 `RuntimeException`을 상속받지 않음!
- 예시 : `IOException`, `SQLException`

**비검사 예외(런타임 예외)**   
- 명시적인 예외처리를 하지 않아도 실행이 가능한 예외
- `RuntimeException`를 상속! 
- 예시 : `NullPointerException`, `ArrayIndexOutOfBoundsException`

> #### 왜 비검사 예외는 명시적인 예외처리를 하지 않아도 될까요?
> 
> 바로 개발자의 충분한 주의로 회피할 수 있는 수준이기 때문입니다!    
>
> - `ArrayIndexOutOfBoundsException` :  배열의 범위를 넘어선 인덱스를 참조할 때 발생하는 에러    
> - `ArithmeticException` :  정수를 0으로 나눌 때 발생하는 에러    
> - `NullPointException` :  null 객체에 접근해서 method를 호출하는 경우 발생하는 에러    
> - `NumberFormatException`:  정수가 아닌 문자열을 정수로 변환할 때 예외 발생    
> - `InputMismatchException` : 의도치 않는 입력 오류 시 발생하는 예외    

## 검사 예외의 고충..?

검사 예외는 `try-catch`으로 언젠가는 꼭! 해결을 해야만 한다.   
안정적인 환경을 만들지만, 유연성을 낮추고 스트림 내부에서 사용할 수 없다는 단점도 존재한다.

이런 특징 때문에, api변경의 파급효과가 커지고 상속에서 유연하지 못하다는 단점을 가진다고 합니다..!

따라서 **진짜 복구 가능한 상황**에서만 사용하는게 좋다고 하네요..?!

### 복구 가능한 상황은 무엇일까요?
> _복구 가능한 상황_ : 적절한 대응을 통해, 정상적 흐름으로 돌아갈 수 있는 상황... 

결국 예외가 발생했더라도 어떤 조치를 통해서 계획했던 결과를 만들어낼 수 있는 상황입니다.
예를 들어서 파일이 없을 때 **기본 파일을 생성하고 계속 진행**한다면 원래 동작을 정상적으로 마칠 수 있게 되는거죠! 


### **복구 불가능한 상황**에서는 어떻게 해야할까요..?
실패를 적절히 다루면 되는거죠.. (웃긴 답변이네요?)

비검사예외를 던지고, `@ExceptionHandler`가 있는 핸들러에서 처리하는 과정을 생각하시면 될 것 같습니다..!

이런 경우에는 원래 의도한 동작은 완료하지 못하지만, 그에 대한 처리를 적절하게 해주는 로직을 제공합니다.

> 복구불가능한 상황에서 검사 예외를 쓰는 것을 생각해봅시다..  
> 
> 어떤 대응을 해도 현재 메서드를 정상 동작 시킬 수 없으니 결국 비검사 예외를 다시 던져서 다른 곳에서 처리하게 하거나, 
> 상위 계층으로 던지는 무책임한 일을 저지르게 되는거죠... 

## 검사 예외보다 더 나은 선택지!

검사 예외는 복구 불가능한 상황에서는 오히려 우연성을 낮추고, 의미없는 `try-catch`문을 써야하는 단점이 있습니다.
이런 경우에는 검사 예외보다 아래의 선택지를 따르는게 좋습니다!

1. `Optional 반환`: 실패 가능성이 있는 메소드가 null이나 빈 Optional을 반환
2. `상태 코드 반환`: 메소드가 성공/실패를 나타내는 상태 코드 반환
3. `비검사 예외`: 진짜 복구 불가능한 상황에는 RuntimeException 사용

다만 1번과 2번은 복구 불가능한 상황은 아닙니다.
원했던 동작은 아니지만, 정상 동작내의 실패결과에 속하는 경우를 말합니다.

예를 들어서 사용자의 ID가 DB에 존재하지 않는 상황인거죠!!    
정상적인 흐름으로 다시 돌아갈 수 있다는 점에서는 검사예외와 비슷하지만, `try-catch`로 다룰 필요가 없는 상황이라고 생각하시면 될 것 같아요!

> 검사 예외의 불편함을 사용자의 ID가 DB에 존재하지 않는 경우에 검사 예외가 발생한다고 생각하면 좋을 것 같네요..!


### 마무리하면서
```
흠.. 언제나 생각하는 것이지만, 결국 이런건 실제로 느끼는 게 더 좋다고 생각합니다!
하나하나 나눠서 유형화하는 것보다는 이런 방법이 있구나~ 라고 생각하고 존재를 기억하고나서 필요할 때 ! 다시 찾아보는게 좋은 방법인 것 같거든요..!!
```

